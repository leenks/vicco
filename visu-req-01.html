<!DOCTYPE html>
<html lang="pt">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="imgs/favicon.png" type="image/png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
        integrity="sha512-...." crossorigin="anonymous" />
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="forms.css">
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
        integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
</head>

<body>

    <div class="container-full">

        <div class="topo-container">
            <div class="container-desktop">

                <div class="topo">
                    <div class="logo">
                        <img src="imgs/logo.png" alt="Logo">
                    </div>
                    <div class="menu">
                        <div class="menu-item">
                            <a href="home.html">
                                <img src="imgs/ico-home.png" alt="Início" width="50px">
                                <p>Início</p>
                            </a>
                        </div>
                        <div class="menu-item">
                            <a href="#"><img src="imgs/ico-relatorios.png" alt="Relatórios" width="50px">
                                <p>Relatórios</p>
                            </a>
                        </div>
                        <div class="menu-item">
        <a href="#" onclick="goBack()">
            <img src="imgs/ico-voltar.png" alt="Voltar" width="50px">
            <p>Voltar</p>
        </a>
    </div>
                    </div>
                </div>

            </div>
        </div>
        <div class="separa-topo"> &nbsp;</div>

        <div class="container-desktop">

            <center><img class="status" src="imgs/icons-status/08.png" /></center>

            <div class="conteudo">
                <div class="container-desktop">
                    <!-- Novo Menu de Migalhas (Breadcrumbs) -->
                    <div class="breadcrumbs">
                        <a href="#">INÍCIO</a>
                        <span> > </span>
                        <a href="#">SUPRIMENTOS</a>
                        <span> > </span>
                        <span>APROVAÇÃO/REPROVAÇÃO</span>
                    </div>

                    <div class="conteudo-in">
                        <h2>Requisição de Compra - SMART FIT - PIRITUBA 2</h2>
                        <!-- Botão para editar ficha -->
                        <button type="button" id="editarFicha" class="sub-icones" title="Editar Ficha">
                            <i class="fa-regular fa-pen-to-square"></i>
                            <label>Editar Requisição</label><br> <span>- (Esse botão só aparece para quem tem permissão)</span>
                        </button>


                        <!-- visualizar ficha -->
                            
                        <div class="form-content">
                            <div id="col-md-7">
                                <form class="qua-5" name="frmTelMan" action="man-requisicao.php" method="POST" enctype="multipart/form-data">
                                    <div class="form-row">
                                        <div class="col-md-3">
                                            <label>Número da Ficha</label>
                                            <input type="text" class="form-control text-center" maxlength="6" id="cod"
                                                name="cod" value="5420" disabled />
                                        </div>
                                        <div class="col-md-4">
                                            <label>Tipo de Requisição</label>
                                            <input type="text" class="form-control text-center" id="tipo_requisicao" name="tipo_requisicao" value="Requisição / Obra" disabled />
                                        </div>
                                        <div class="col-md-3">
                                            <label>Status</label>
                                            <select id="status" name="status" class="form-control" disabled>
                                                <option value="Aberto">Aberto</option>
                                                <option value="Pré-Aprovado">Pré-Aprovado</option>
                                                <option value="Cotação">Cotação</option>
                                                <option value="Aprovação">Aprovação</option>
                                                <option value="Reprovada">Reprovada</option>
                                                <option value="Pré-Compra" selected>Pré-Compra</option>
                                                <option value="Pagamento">Pagamento</option>
                                                <option value="Compra">Compra</option>
                                                <option value="Entrega">Entregue</option>
                                                <option value="Cancelada">Cancelada</option>
                                                <option value="Recusada">Recusada</option>
                                                <option value="Recebido">Recebido</option>
                                            </select>
                                        </div>
                                        
                                    </div>
                        
                                    <div class="form-row">
                                        <div class="col-md-6">
                                            <label>Cliente</label>
                                            <input type="text" class="form-control text-center" id="cliente" name="cliente" value="SMARTFIT ESCOLA DE GINASTICA E DANCA S.A" disabled />
                                        </div>
                                        <div class="col-md-6">
                                            <label>Obra</label>
                                            <input type="text" class="form-control text-center" id="obra" name="obra" value="Smart Fit Guarujá Puglisi" disabled />
                                        </div>
                                        <div class="col-md-6">
                                            <label>Solicitante</label>
                                            <input type="text" class="form-control text-center" id="solicitante" name="solicitante" value="Eliana da Silva Pereira Orosimbo" disabled />
                                        </div>
                                    
                        
                                    <div class="form-row">
                                        <div class="col-md-3">
                                            <label>Data do Cadastro</label>
                                            <input type="datetime-local" class="form-control text-center" id="data_cadastro" name="data_cadastro" value="2024-05-23T08:18" disabled />
                                        </div>
                                        <div class="col-md-3">
                                            <label>Data da Cotação</label>
                                            <input type="datetime-local" class="form-control text-center" id="data_cotacao" name="data_cotacao" value="2024-05-23T08:47" disabled />
                                        </div>
                                        <div class="col-md-3">
                                            <label>Data da Aprovação</label>
                                            <input type="datetime-local" class="form-control text-center" id="data_aprovacao" name="data_aprovacao" value="2024-05-27T11:06" disabled />
                                        </div>
                                        <div class="col-md-3">
                                            <label>Data de Entrega</label>
                                            <input type="date" class="form-control text-center" id="data_entrega" name="data_entrega" value="2024-05-24" disabled />
                                        </div>
                                    </div>
                        
                                    <div class="form-row">
                                        <div class="col-md-6">
                                            <label>Endereço</label>
                                            <input type="text" class="form-control text-center" id="endereco" name="endereco" value="Avenida Puglisi, 40 Guarujá-SP" disabled />
                                        </div>
                                        <div class="col-md-3">
                                            <label>CNPJ</label>
                                            <input type="text" class="form-control text-center" id="cnpj" name="cnpj" value="07.594.978/0087-48" disabled />
                                        </div>
                                        <div class="col-md-3">
                                            <label>Inscrição Estadual</label>
                                            <input type="text" class="form-control text-center" id="inscricao_estadual" name="inscricao_estadual" value="" disabled />
                                        </div>
                                    </div>
                        
                                    <div class="form-row">
                                        <div class="col-md-4">
                                            <label>Grupo</label>
                                            <input type="text" class="form-control text-center" id="grupo" name="grupo" value="06 - Estruturas Metálicas" disabled />
                                        </div>
                                        <div class="col-md-4">
                                            <label>Sub-Grupo</label>
                                            <input type="text" class="form-control text-center" id="sub_grupo" name="sub_grupo" value="Estruturas para reforço em mezanino existente, cobertura existente e demais itens que já constam" disabled />
                                        </div>
                                    </div>
                        
                                    <div class="form-row">
                                        <div class="col-md-12">
                                            <label>Descrição</label>
                                            <input type="text" class="form-control text-center" id="descricao" name="descricao" value="Estrutura de suporte de TV - projeto novo" disabled />
                                        </div>
                                        <div class="col-md-12">
                                            <label>Observação</label>
                                            <textarea class="form-control" rows="5" id="observacao" name="observacao" disabled>7 br - Tubo de metalon 150x150m e-3.75mm 7 br - Tubo de metalon 30x30mm e-2mm 5 kg - Disco de corte para ferro 9" 5 kg - Eletrodo 3,5Gd</textarea>
                                        </div>
                                    </div>
                        
                                    <div class="form-row align-right">
                                        <div class="col-md-2 text-center">
                                            <span id="tot_r" class="campo-valor"><strong>R$ 0,00</strong></span>
                                        </div>
                                        <div class="col-md-2"></div>
                                        <div class="space-btn text-center">
                                            <button type="submit" id="sal_r" name="salvar" class="sub-icones"><i class="fa-regular fa-floppy-disk"></i><label>Salvar</label></button>
                                        </div>
                                        <div class="space-btn text-center">
                                            <button type="submit" id="fecha" class="sub-icones" name="fechar" title="Efetua fechamento da requisição para prosseguir com cotação da mesma"><i class="fa-regular fa-square-check"></i><label>Finalizar</label></button>
                                        </div>
                                        <div class="space-btn text-center">
                                            <button type="submit" id="cancel" class="sub-icones" name="cancel" title="Efetua cancelamento de requisição de compra solicitada para ser adquirida"><i class="fa-regular fa-rectangle-xmark"></i><label>Cancelar</label></button>
                                        </div>
                                        <div class="space-btn text-center">
                                            <div>
                                                <input type="file" id="anexo" name="anexo" class="sub-icones" style="display: none;" />
                                                <button type="button" id="fot_carrega" class="sub-icones" name="subir" title="Abrir janela para carregar imagem para a requisição de compra" onclick="document.getElementById('anexo').click();">
                                                    <i class="fa-solid fa-paperclip"></i><label>Solicitação</label>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                                                    <hr width="100%">



                            <div id="lis_i" class="col-md-12  p-0">
                                <div id="tab-2_wrapper" class="dataTables_wrapper no-footer">

                                    <div class="overflow-auto" style="max-width: 100vw;">
                                        <div class="tab-1 table-responsive form-row-table">
                                            <table id="tab-2" class="table-ficha">
                                                <thead class="thead-light">
                                                    <tr>
                                                        <th width="3%">Ação</th>
                                                        <th>Seq.</th>
                                                        <th>Tipo</th>
                                                        <th>Cód.</th>
                                                        <th>Descrição do Item</th>
                                                        <th>Unid.</th>
                                                        <th>Preço</th>
                                                        <th>índice</th>
                                                        <th>Valor</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr class="cinza-claro">
                                                        <td><!-- Botão para editar ficha -->
                                                            <button type="button" class="btn btn-primary btn-sm btn-editar-table" onclick="editarFicha(this)">
                                                                Editar
                                                            </button>
                                                            <!-- Botão para cancelar edição -->
                                                            <button type="button" class="btn btn-success btn-sm btn-cancelar-edicao" style="display: none;" onclick="cancelarEdicao(this)">
                                                                Concluir
                                                            </button>
                                                        </td>
                                                        <td>1</td>
                                                        <td>Serviços</td>
                                                        <td>001</td>
                                                        <td>Descrição detalhada aqui</td>
                                                        <td>pç</td>
                                                        <td>R$ 0,83</td>
                                                        <td>25,7000</td>
                                                        <td>R$ 20,00</td>
                                                    </tr>
                                                    <tr class="cinza-claro">
                                                       <td><!-- Botão para editar ficha -->
                                                            <button type="button" class="btn btn-primary btn-sm btn-editar-table" onclick="editarFicha(this)">
                                                                Editar
                                                            </button>
                                                            <!-- Botão para cancelar edição -->
                                                            <button type="button" class="btn btn-success btn-sm btn-cancelar-edicao" style="display: none;" onclick="cancelarEdicao(this)">
                                                                Concluir
                                                            </button>
                                                        </td>
                                                        <td>2</td>
                                                        <td>Serviços</td>
                                                        <td>001</td>
                                                        <td>Descrição detalhada aqui</td>
                                                        <td>m²</td>
                                                        <td>R$ 0,83</td>
                                                        <td>25,7000</td>
                                                        <td>R$ 20,00</td>
                                                    </tr>
                                                    <tr class="cinza-medio">
                                                       <td><!-- Botão para editar ficha -->
                                                            <button type="button" class="btn btn-primary btn-sm btn-editar-table" onclick="editarFicha(this)">
                                                                Editar
                                                            </button>
                                                            <!-- Botão para cancelar edição -->
                                                            <button type="button" class="btn btn-success btn-sm btn-cancelar-edicao" style="display: none;" onclick="cancelarEdicao(this)">
                                                                Concluir
                                                            </button>
                                                        </td>
                                                        <td>3</td>
                                                        <td>Materiais</td>
                                                        <td>001</td>
                                                        <td>Descrição detalhada aqui</td>
                                                        <td>kg</td>
                                                        <td>R$ 0,83</td>
                                                        <td>25,7000</td>
                                                        <td>R$ 20,00</td>
                                                    </tr>
                                                    <tr class="cinza-escuro">
                                                       <td><!-- Botão para editar ficha -->
                                                            <button type="button" class="btn btn-primary btn-sm btn-editar-table" onclick="editarFicha(this)">
                                                                Editar
                                                            </button>
                                                            <!-- Botão para cancelar edição -->
                                                            <button type="button" class="btn btn-success btn-sm btn-cancelar-edicao" style="display: none;" onclick="cancelarEdicao(this)">
                                                                Concluir
                                                            </button>
                                                        </td>
                                                        <td>4</td>
                                                        <td>Equipamentos</td>
                                                        <td>001</td>
                                                        <td>Descrição detalhada aqui</td>
                                                        <td>h</td>
                                                        <td>R$ 0,83</td>
                                                        <td>25,7000</td>
                                                        <td>R$ 20,00</td>
                                                    </tr>

                                                </tbody>
                                            </table>

                                        </div>
                                    </div>

                                </div>
                            </div><!--div form-content-->
                            <div class="form-row align-center">
                            <div class="space-btn text-center">
                                <button type="submit" id="btnSalvar" name="salvar" class="sub-icones"><i
                                        class="fa-regular fa-floppy-disk"></i><label>Salvar</label></button>
                            </div>
                            </div>

                        </div><!--tab-2 wrapper-->
                    </div><!--#lis-cold-md-->

                    <!-- Ícone no footer -->
                    <div class="ico-subir-footer" onclick="scrollToTop()">
                        <i class="fas fa-arrow-up"></i>
                    </div>

                </div><!--conteudo desktop-->
            </div><!--div conteudo-->

            <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>


            <script>
                function habilitarCampos() {
                    // Selecionar todos os campos exceto os especificados
                    var campos = document.querySelectorAll('.form-control:not(#cod, #unid, #des, #valor_encargos, #valor_custos_indiretos, #valor_lucro_liquido, #valor_impostos, #valor_potencializador)');

                    // Habilitar os campos selecionados
                    campos.forEach(function (campo) {
                        campo.removeAttribute('disabled');
                    });
                }

                // Adicionando o evento de clique fora da função
                document.getElementById('editarFicha').addEventListener('click', function () {
                    habilitarCampos();
                });
            </script>


            <script>
                // Função para rolar até o topo da página
                function scrollToTop() {
                    window.scrollTo({
                        top: 0,
                        behavior: 'smooth' // Para fazer uma rolagem suave
                    });
                }
            </script>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<script>
    // Função para atualizar a imagem do status
    function atualizarImagemStatus() {
        var statusSelect = document.getElementById("status");
        var imagemStatus = document.querySelector(".status");

        // Mapeamento de opções de status para imagens correspondentes
        var imagensStatus = {
            "Aberto": "03.png",
            "Pré-Apovado": "03.png",
            "Cotação": "04.png",
            "Recusada": "05.png",
            "Aprovação": "06.png",
            "Reprovada": "07.png",
            "Pré-Compra": "08.png",
            "Pagamento": "09.png",
            "Compra": "10.png",
            "Entrega": "11.png",
            "Cancelada": "02.png",
            "Recusada": "05.png",
            "Recebido": "11b.png"
        };

        // Verifica se o valor selecionado está presente no mapeamento
        var statusSelecionado = statusSelect.value;
        if (statusSelecionado in imagensStatus) {
            // Atualiza a imagem com base no mapeamento
            imagemStatus.src = "imgs/icons-status/" + imagensStatus[statusSelecionado];
        } else {
            // Caso contrário, mantém a imagem como "03.png"
            imagemStatus.src = "imgs/icons-status/03.png";
        }
    }

    // Adiciona um ouvinte de evento para o evento change do select
    document.getElementById("status").addEventListener("change", atualizarImagemStatus);

    // Chamada inicial para garantir que a imagem seja atualizada corretamente
    atualizarImagemStatus();
</script>



<script>
    //volta um nível de página na navegação quando clicar no menu Voltar
    function goBack() {
        window.history.back();
    }
</script>

            <!--DEIXA EDITAVEL COLUNAS DA TABELA-->
            <script>
                document.addEventListener("DOMContentLoaded", function () {
    // Seleciona todos os botões "Editar" dentro da tabela
    var botoesEditar = document.querySelectorAll('.btn-editar-table');

    // Adiciona evento de clique a cada botão "Editar"
    botoesEditar.forEach(function (botao) {
        botao.addEventListener('click', function () {
            // Obtém a linha pai do botão clicado
            var linha = this.parentNode.parentNode;

            // Torna apenas as colunas Seq. e Índice editáveis
            var celulaSeq = linha.querySelector('td:nth-child(2)');
            var celulaIndice = linha.querySelector('td:nth-child(8)');

            // Armazena os valores originais das células
            var valorOriginalSeq = celulaSeq.textContent;
            var valorOriginalIndice = celulaIndice.textContent;

            // Transforma as células em campos de entrada editáveis
            celulaSeq.innerHTML = '<input type="text" value="' + valorOriginalSeq + '">';
            celulaIndice.innerHTML = '<input type="text" value="' + valorOriginalIndice + '">';

            // Exibe o botão "Cancelar"
            var botaoCancelar = linha.querySelector('.btn-cancelar-edicao');
            botaoCancelar.style.display = 'inline-block';

            // Oculta o botão "Editar"
            botao.style.display = 'none';
        });
    });

    // Adiciona evento de clique a cada botão "Cancelar"
    var botoesCancelar = document.querySelectorAll('.btn-cancelar-edicao');
    botoesCancelar.forEach(function (botao) {
        botao.addEventListener('click', function () {
            // Obtém a linha pai do botão clicado
            var linha = this.parentNode.parentNode;

            // Transforma os campos de entrada de volta em texto simples
            var celulaSeq = linha.querySelector('td:nth-child(2)');
            var celulaIndice = linha.querySelector('td:nth-child(8)');
            celulaSeq.textContent = celulaSeq.querySelector('input').value;
            celulaIndice.textContent = celulaIndice.querySelector('input').value;

            // Exibe o botão "Editar" e oculta o botão "Cancelar"
            var botaoEditar = linha.querySelector('.btn-editar-table');
            botaoEditar.style.display = 'inline-block';
            this.style.display = 'none';
        });
    });
});

            </script>


            
</body>

</html>