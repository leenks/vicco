<!DOCTYPE html>
<html lang="pt">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="imgs/favicon.png" type="image/png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
        integrity="sha512-...." crossorigin="anonymous" />
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="forms.css">
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
        integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
</head>

<body>

    <div class="container-full">

        <div class="topo-container">
            <div class="container-desktop">

                <div class="topo">
                    <div class="logo">
                        <img src="imgs/logo.png" alt="Logo">
                    </div>
                    <div class="menu">
                        <div class="menu-item">
                            <a href="home.html">
                                <img src="imgs/ico-home.png" alt="Início" width="50px">
                                <p>Início</p>
                            </a>
                        </div>
                        <div class="menu-item">
                            <a href="#"><img src="imgs/ico-relatorios.png" alt="Relatórios" width="50px">
                                <p>Relatórios</p>
                            </a>
                        </div>
                        <div class="menu-item">
                            <a href="#" onclick="goBack()"><img src="imgs/ico-voltar.png" alt="Voltar" width="50px">
                                <p>Voltar</p>
                            </a>
                        </div>
                    </div>
                </div>

            </div>
        </div>
        <div class="separa-topo"> &nbsp;</div>

        <div class="container-desktop">

            <div class="caixa-menu2">
                <div class="menu-item2">
                    <a href="nova-requisicao.html"><img src="imgs/ico-budget.png" alt="Orçamentos">
                        <p>Orçamentos</p>
                    </a>
                </div>
                <div class="menu-item2">
                    <a href="novo-reembolso.html"><img src="imgs/ico-mapa-quant.png" alt="Mapa">
                        <p>Mapa Quantitativo</p>
                    </a>
                </div>

                <div class="menu-item2">
                    <a href="nova-cotacao.html"><img src="imgs/ico-cadastros.png" alt="Cadastros">
                        <p>Cadastros</p>
                    </a>
                </div>

            </div>
            <div class="conteudo">
                <div class="container-desktop">
                    <!-- Novo Menu de Migalhas (Breadcrumbs) -->
                    <div class="breadcrumbs">
                        <a href="#">INÍCIO</a>
                        <span> > </span>
                        <a href="#">PLANEJAMENTO</a>
                        <span> > </span>
                        <span>FICHAS DE COMPOSIÇÃO</span>
                    </div>

                    <div class="conteudo-in">
                        <h2>Fichas de Composição</h2>
                        <!-- Botão para editar ficha -->
                        <button type="button" id="editarFicha" class="sub-icones" title="Editar Ficha">
                            <i class="fa-regular fa-pen-to-square"></i>
                            <label>Editar Ficha</label>
                        </button>


                        <!-- visualizar ficha -->
                        <div class="form-content">
                            <div class="col-md-7">
                                <div class="form-row">

                                    <div class="col-md-3">
                                        <label>Número da Ficha</label>
                                        <input type="text" class="form-control text-center" maxlength="6" id="cod"
                                            name="cod" value="6513" disabled />
                                    </div>
                                    <div class="col-md-3">
                                        <label>Status</label>
                                        <select id="status" name="status" class="form-control text-center" disabled>
                                            <option value="status_pronto" selected>Pronto</option>
                                            <option>Entregue</option>
                                        </select>
                                    </div>
                                    <div class="col-md-3">
                                        <label>Unid. Medida</label>
                                        <input type="text" class="form-control text-center" maxlength="4" id="unid"
                                            name="unid" value="m²" required disabled />
                                    </div>
                                </div>
                                <!-- Linha 2: Descrição do Serviço Prestado e Unidade de Medida -->
                                <div class="form-row">
                                    <div class="col-md-12">
                                        <label>Descrição do Serviço Prestado</label>
                                        <span  style="font-size: 20px; padding: 2px; max-width: 600px; word-wrap: break-word;">2.8.6.1 - Bacia Sanitária para deficientes - DECA Linha Confort, Vogue PLUS, S/ ABERT - Mod. P510, (195)</span>
                                    </div>

                                </div>

                                <div class="form-row">
                                    <div class="col-md-6">
                                        <label>Grupo</label>
                                        <select id="gru" name="gru" class="form-control" disabled
                                            style="font-size: 18px; padding: 2px;">
                                            <option>Paredes e Divisórias</option>
                                            <option>Opção Um</option>
                                            <option>Opção Dois</option>
                                        </select>
                                    </div>
                                    <div class="col-md-12">
                                        <label for="obs">Observações para a Ficha Técnica</label>
                                        <textarea class="form-control" rows="12" id="obs" placeholder=" " name="obs"
                                            disabled>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam in turpis quis justo luctus faucibus.Vivamus sodales ipsum ut odio commodo, sit amet pharetra ipsum fringilla. Sed ut tortor leo. Nullam ut arcu id velit accumsan volutpat nec sit amet justo. <br>Cras dapibus sit amet sem a fringilla. Integer quis rhoncus ex. Vestibulum consectetur lacus a enim aliquet, ut sollicitudin odio pulvinar. Quisque euismod arcu id nibh vestibulum congue. Donec venenatis nisi et justo egestas, nec mattis nunc lacinia.
                                    </textarea>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-5">
                                <!-- Sidebar -->
                                <div class="sidebar-form cinza-medio">
                                    <!-- Conteúdo do sidebar aqui -->
                                    <h3>Composição BDI</h3>

                                    <!-- Continuação dos campos de formulário -->
                                    <div class="form-row">
                                        <div class="col-md-6">
                                            <label>% Encargos</label>
                                            <input type="text" class="form-control text-center" maxlength="50"
                                                id="encargos" name="encargos" value="10%" disabled />
                                        </div>
                                        <div class="col-md-6">
                                            <label>R$ Encargos</label>
                                            <input type="text" class="form-control text-center" maxlength="50"
                                                id="valor_encargos" name="valor_encargos" value="R$ 10,00" disabled />
                                        </div>
                                    </div>

                                    <div class="form-row">
                                        <div class="col-md-6">
                                            <label>% Custos Indiretos</label>
                                            <input type="text" class="form-control text-center" maxlength="50"
                                                id="custos_indiretos" name="custos_indiretos" value="11%" disabled />
                                        </div>
                                        <div class="col-md-6">
                                            <label>R$ Custos Indiretos</label>
                                            <input type="text" class="form-control text-center" maxlength="50"
                                                id="valor_custos_indiretos" name="valor_custos_indiretos"
                                                value="R$ 11,00" disabled />
                                        </div>
                                    </div>

                                    <div class="form-row">
                                        <div class="col-md-6">
                                            <label>% Lucro Líquido</label>
                                            <input type="text" class="form-control text-center" maxlength="50"
                                                id="lucro_liquido" name="lucro_liquido" value="12%" disabled />
                                        </div>
                                        <div class="col-md-6">
                                            <label>R$ Lucro Líquido</label>
                                            <input type="text" class="form-control text-center" maxlength="50"
                                                id="valor_lucro_liquido" name="valor_lucro_liquido" value="R$ 12,00"
                                                disabled />
                                        </div>
                                    </div>

                                    <div class="form-row">
                                        <div class="col-md-6">
                                            <label>% Impostos</label>
                                            <input type="text" class="form-control text-center" maxlength="50"
                                                id="impostos" name="impostos" value="13%" disabled />
                                        </div>
                                        <div class="col-md-6">
                                            <label>R$ Impostos</label>
                                            <input type="text" class="form-control text-center" maxlength="50"
                                                id="valor_impostos" name="valor_impostos" value="R$ 13,00" disabled />
                                        </div>
                                    </div>

                                    <div class="form-row">
                                        <div class="col-md-6">
                                            <label>% Potencializador</label>
                                            <input type="text" class="form-control text-center" maxlength="50"
                                                id="potencializador" name="potencializador" value="14%" disabled />
                                        </div>
                                        <div class="col-md-6">
                                            <label>R$ Potencializador</label>
                                            <input type="text" class="form-control text-center" maxlength="50"
                                                id="valor_potencializador" name="valor_potencializador" value="R$ 14,00"
                                                disabled />
                                        </div>

                                    </div>
                                </div>
                            </div>
                            <hr width="100%">

                            <div class="form-row">
                                <div class="cinza-claro col-md-6 align-left" style="padding-bottom: 15px;">
                                    <div class="col-md-4">
                                        <label>Custo Material</label>
                                        <input type="text" class="form-control text-center" maxlength="50" id="pro_i"
                                            name="pro_i" value="R$ 13,64" disabled />
                                    </div>
                                    <span style="padding-top: 35px;">+</span>
                                    <div class="col-md-4">
                                        <label>Custo Mão de Obra</label>
                                        <input type="text" class="form-control text-center" maxlength="200" id="uni_i"
                                            name="uni_i" value="R$ 17,47" disabled/>
                                    </div>
                                    <span style="padding-top: 35px;">=</span>
                                    <div class="col-md-4">
                                        <label>Custo Primário</label>
                                        <input type="text" class="form-control text-center"
                                            style="background-color: #444; color: #fff;" maxlength="50" id="pro_i"
                                            name="pro_i" value="R$ 31,11" disabled />
                                    </div>
                                </div><!--form row cinza medio-->

                                <div class="col-md-6 align-left" style="padding-bottom: 15px;">
                                    <span style="padding-top: 35px;"><img src="imgs/ico-plus2-ficha.png"></span>
                                    <div class="col-md-4">
                                        <label>Impostos e Encargos</label>
                                        <input type="text" class="form-control text-center" maxlength="50" id="pro_i"
                                            name="pro_i" value="R$ 17,47" disabled/>
                                    </div>
                                    <span style="padding-top: 35px;"><img src="imgs/ico-equal-ficha.png"></span>
                                    <div class="col-md-4">
                                        <label>Custo Unitário</label>
                                        <input type="text" class="form-control text-center"
                                            style="background-color: #444; color: #fff;" maxlength="50" id="pro_i"
                                            name="pro_i" value="R$ 31,11" disabled />
                                    </div>

                                </div><!--col md 6-->


                                <div class="col-md-12 align-right">
                                    <span style="padding-top: 5px; text-align: right;"><img
                                            src="imgs/ico-plus-ficha.png" width="100px" height="80px"></span>
                                    <div class="col-md-2">
                                        <label style="text-align: right;">Preço de Venda</label>
                                        <input type="text" class="form-control text-center"
                                            style="background-color: #229efe; color: #222;" maxlength="50" id="pro_i"
                                            name="pro_i" value="R$ 50,00" disabled />
                                    </div>
                                </div>
                            </div><!--form row-->

                            <div class="form-row">
                                <div class="cinza-claro col-md-6 align-left" style="padding-bottom: 15px;">
                                    <div class="col-md-4">
                                        <label>Custos Indiretos</label>
                                        <input type="text" class="form-control text-center" maxlength="50" id="pro_i"
                                            name="pro_i" value="R$ 13,64" disabled/>
                                    </div>
                                    <span style="padding-top: 35px;">+</span>
                                    <div class="col-md-4">
                                        <label>Lucro Líquido</label>
                                        <input type="text" class="form-control text-center" maxlength="200" id="uni_i"
                                            name="uni_i" value="R$ 17,47" disabled/>
                                    </div>
                                    <span style="padding-top: 35px;">=</span>
                                    <div class="col-md-4">
                                        <label>Lucro Bruto</label>
                                        <input type="text" class="form-control text-center"
                                            style="background-color: #444; color: #fff;" maxlength="50" id="pro_i"
                                            name="pro_i" value="R$ 31,11" disabled/>
                                    </div>

                                </div><!--form row cinza medio-->

                                <div class="col-md-6 align-left" style="padding-bottom: 15px;">
                                    <span style="padding-top: 35px;"><img src="imgs/ico-plus2-ficha.png"></span>
                                    <div class="col-md-4">
                                        <label>Custo Potencializado</label>
                                        <input type="text" class="form-control text-center" maxlength="50" id="pro_i"
                                            name="pro_i" value="R$ 17,47" disabled/>
                                    </div>
                                    <span style="padding-top: 35px;"><img src="imgs/ico-equal-ficha.png"></span>
                                    <div class="col-md-4">
                                        <label>Lucro Potencializado</label>
                                        <input type="text" class="form-control text-center"
                                            style="background-color: #444; color: #fff;" maxlength="50" id="pro_i"
                                            name="pro_i" value="R$ 31,11" />
                                    </div>

                                </div><!--col md 6-->
                                <br>
                                <div class="align-right">
                                    <span><b>Ultima Atualização de Composição: 07/05/24<br>
                                            Ultima Atualização de Valores de Insumos: 07/05/24</b></span>
                                </div>
                            </div><!--form row-->
                            <hr width="100%">



                            <div id="lis_i" class="col-md-12  p-0">
                                <div id="tab-2_wrapper" class="dataTables_wrapper no-footer">

                                    <div class="overflow-auto" style="max-width: 100vw;">
                                        <div class="tab-1 table-responsive form-row-table">
                                            <table id="tab-2" class="table-ficha">
                                                <thead class="thead-light">
                                                    <tr>
                                                        <th width="3%">Ação</th>
                                                        <th>Seq.</th>
                                                        <th>Tipo</th>
                                                        <th>Cód.</th>
                                                        <th>Descrição do Item</th>
                                                        <th>Unid.</th>
                                                        <th>Preço</th>
                                                        <th>índice</th>
                                                        <th>Valor</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr class="cinza-claro">
                                                        <td><!-- Botão para editar ficha -->
                                                            <button type="button" class="btn btn-primary btn-sm btn-editar-table" onclick="editarFicha(this)">
                                                                Editar
                                                            </button>
                                                            <!-- Botão para cancelar edição -->
                                                            <button type="button" class="btn btn-success btn-sm btn-cancelar-edicao" style="display: none;" onclick="cancelarEdicao(this)">
                                                                Concluir
                                                            </button>
                                                        </td>
                                                        <td>1</td>
                                                        <td>Serviços</td>
                                                        <td>001</td>
                                                        <td>Descrição detalhada aqui</td>
                                                        <td>pç</td>
                                                        <td>R$ 0,83</td>
                                                        <td>25,7000</td>
                                                        <td>R$ 20,00</td>
                                                    </tr>
                                                    <tr class="cinza-claro">
                                                       <td><!-- Botão para editar ficha -->
                                                            <button type="button" class="btn btn-primary btn-sm btn-editar-table" onclick="editarFicha(this)">
                                                                Editar
                                                            </button>
                                                            <!-- Botão para cancelar edição -->
                                                            <button type="button" class="btn btn-success btn-sm btn-cancelar-edicao" style="display: none;" onclick="cancelarEdicao(this)">
                                                                Concluir
                                                            </button>
                                                        </td>
                                                        <td>2</td>
                                                        <td>Serviços</td>
                                                        <td>001</td>
                                                        <td>Descrição detalhada aqui</td>
                                                        <td>m²</td>
                                                        <td>R$ 0,83</td>
                                                        <td>25,7000</td>
                                                        <td>R$ 20,00</td>
                                                    </tr>
                                                    <tr class="cinza-medio">
                                                       <td><!-- Botão para editar ficha -->
                                                            <button type="button" class="btn btn-primary btn-sm btn-editar-table" onclick="editarFicha(this)">
                                                                Editar
                                                            </button>
                                                            <!-- Botão para cancelar edição -->
                                                            <button type="button" class="btn btn-success btn-sm btn-cancelar-edicao" style="display: none;" onclick="cancelarEdicao(this)">
                                                                Concluir
                                                            </button>
                                                        </td>
                                                        <td>3</td>
                                                        <td>Materiais</td>
                                                        <td>001</td>
                                                        <td>Descrição detalhada aqui</td>
                                                        <td>kg</td>
                                                        <td>R$ 0,83</td>
                                                        <td>25,7000</td>
                                                        <td>R$ 20,00</td>
                                                    </tr>
                                                    <tr class="cinza-escuro">
                                                       <td><!-- Botão para editar ficha -->
                                                            <button type="button" class="btn btn-primary btn-sm btn-editar-table" onclick="editarFicha(this)">
                                                                Editar
                                                            </button>
                                                            <!-- Botão para cancelar edição -->
                                                            <button type="button" class="btn btn-success btn-sm btn-cancelar-edicao" style="display: none;" onclick="cancelarEdicao(this)">
                                                                Concluir
                                                            </button>
                                                        </td>
                                                        <td>4</td>
                                                        <td>Equipamentos</td>
                                                        <td>001</td>
                                                        <td>Descrição detalhada aqui</td>
                                                        <td>h</td>
                                                        <td>R$ 0,83</td>
                                                        <td>25,7000</td>
                                                        <td>R$ 20,00</td>
                                                    </tr>

                                                </tbody>
                                            </table>

                                        </div>
                                    </div>

                                </div>
                            </div><!--div form-content-->
                            <div class="form-row align-center">
                            <div class="space-btn text-center">
                                <button type="submit" id="btnSalvar" name="salvar" class="sub-icones"><i
                                        class="fa-regular fa-floppy-disk"></i><label>Salvar</label></button>
                            </div>
                            </div>

                        </div><!--tab-2 wrapper-->
                    </div><!--#lis-cold-md-->

                    <!-- Ícone no footer -->
                    <div class="ico-subir-footer" onclick="scrollToTop()">
                        <i class="fas fa-arrow-up"></i>
                    </div>

                </div><!--conteudo desktop-->
            </div><!--div conteudo-->

            <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>


            <script>
                function habilitarCampos() {
                    // Selecionar todos os campos exceto os especificados
                    var campos = document.querySelectorAll('.form-control:not(#cod, #unid, #des, #valor_encargos, #valor_custos_indiretos, #valor_lucro_liquido, #valor_impostos, #valor_potencializador)');

                    // Habilitar os campos selecionados
                    campos.forEach(function (campo) {
                        campo.removeAttribute('disabled');
                    });
                }

                // Adicionando o evento de clique fora da função
                document.getElementById('editarFicha').addEventListener('click', function () {
                    habilitarCampos();
                });
            </script>


            <script>
                // Função para rolar até o topo da página
                function scrollToTop() {
                    window.scrollTo({
                        top: 0,
                        behavior: 'smooth' // Para fazer uma rolagem suave
                    });
                }
            </script>

            <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>


            <script>
                function goBack() {
                    window.history.back();
                }
            </script>


            <!--DEIXA EDITAVEL COLUNAS DA TABELA-->
            <script>
                document.addEventListener("DOMContentLoaded", function () {
    // Seleciona todos os botões "Editar" dentro da tabela
    var botoesEditar = document.querySelectorAll('.btn-editar-table');

    // Adiciona evento de clique a cada botão "Editar"
    botoesEditar.forEach(function (botao) {
        botao.addEventListener('click', function () {
            // Obtém a linha pai do botão clicado
            var linha = this.parentNode.parentNode;

            // Torna apenas as colunas Seq. e Índice editáveis
            var celulaSeq = linha.querySelector('td:nth-child(2)');
            var celulaIndice = linha.querySelector('td:nth-child(8)');

            // Armazena os valores originais das células
            var valorOriginalSeq = celulaSeq.textContent;
            var valorOriginalIndice = celulaIndice.textContent;

            // Transforma as células em campos de entrada editáveis
            celulaSeq.innerHTML = '<input type="text" value="' + valorOriginalSeq + '">';
            celulaIndice.innerHTML = '<input type="text" value="' + valorOriginalIndice + '">';

            // Exibe o botão "Cancelar"
            var botaoCancelar = linha.querySelector('.btn-cancelar-edicao');
            botaoCancelar.style.display = 'inline-block';

            // Oculta o botão "Editar"
            botao.style.display = 'none';
        });
    });

    // Adiciona evento de clique a cada botão "Cancelar"
    var botoesCancelar = document.querySelectorAll('.btn-cancelar-edicao');
    botoesCancelar.forEach(function (botao) {
        botao.addEventListener('click', function () {
            // Obtém a linha pai do botão clicado
            var linha = this.parentNode.parentNode;

            // Transforma os campos de entrada de volta em texto simples
            var celulaSeq = linha.querySelector('td:nth-child(2)');
            var celulaIndice = linha.querySelector('td:nth-child(8)');
            celulaSeq.textContent = celulaSeq.querySelector('input').value;
            celulaIndice.textContent = celulaIndice.querySelector('input').value;

            // Exibe o botão "Editar" e oculta o botão "Cancelar"
            var botaoEditar = linha.querySelector('.btn-editar-table');
            botaoEditar.style.display = 'inline-block';
            this.style.display = 'none';
        });
    });
});

            </script>


            
</body>

</html>